# ClipAiMan 项目规划方案

> 创建日期: 2026-02-22
> 版本: 2.0.0

---

## 一、产品定位

### 1.1 核心价值
**ClipAiMan** - AI 漫剧视频智能创作平台

将小说/漫画内容自动转化为高质量动态漫剧视频

### 1.2 目标用户
- 网文作者想要将自己的作品视频化
- 漫画爱好者
- 内容创作者
- 自媒体从业者

### 1.3 差异化定位
| 产品 | 定位 |
|------|------|
| ClipAiMan | 漫剧生成 (漫画/动漫视频) |
| ClipFlow | 解说混剪 (视频解说) |

---

## 二、功能规划

### 2.1 核心功能

#### 2.1.1 小说/漫画输入
- [ ] 支持 TXT、EPUB、PDF 格式
- [ ] 支持图片输入 (漫画分格识别)
- [ ] 编码自动检测

#### 2.1.2 AI 智能解析
- [ ] 自动提取角色
- [ ] 章节结构分析
- [ ] 改编潜力评估
- [ ] 情感曲线分析

#### 2.1.3 剧本生成
- [ ] 多场景拆分
- [ ] 对白生成
- [ ] 动作描写
- [ ] 时长估算

#### 2.1.4 分镜设计
- [ ] 镜头类型选择
- [ ] 角度/运动设置
- [ ] AI 绘图 Prompt
- [ ] 手动调整

#### 2.1.5 角色设计
- [ ] AI 生成角色形象
- [ ] 一致性引擎
- [ ] 风格统一
- [ ] 手动调整

#### 2.1.6 场景渲染
- [ ] AI 图像生成
- [ ] 漫画风格渲染
- [ ] 背景/角色合成

#### 2.1.7 动态合成
- [ ] 镜头运动
- [ ] 表情动画
- [ ] 口型同步 ⭐
- [ ] 转场效果

#### 2.1.8 配音配乐
- [ ] TTS 多角色配音
- [ ] 背景音乐匹配
- [ ] 音效叠加

#### 2.1.9 对口型 ⭐ (新增)
- [ ] Wav2Lip 对口型
- [ ] SadTalker 头部动画
- [ ] 基础口型动画

#### 2.1.10 导出发布
- [ ] 多种格式 (MP4/WebM/MOV)
- [ ] 多种分辨率 (480p~4K)
- [ ] 社交平台一键发布

### 2.2 增强功能

#### 2.2.1 工作流优化
- [x] 重试机制
- [x] 检查点保存
- [x] 智能缓存
- [x] 并行处理
- [ ] 增量更新
- [ ] 分布式处理

#### 2.2.2 AI 模型
- [ ] OpenAI GPT-5
- [ ] Anthropic Claude 4
- [ ] 百度 ERNIE 5.0
- [ ] 阿里 Qwen 3.5
- [ ] 智谱 GLM-5
- [ ] MiniMax M2.5

#### 2.2.3 角色一致性
- [ ] 外观一致性
- [ ] 服装一致性
- [ ] 表情一致性
- [ ] 声音一致性

#### 2.2.4 原创性保障
- [ ] 内容指纹
- [ ] 语义去重
- [ ] 模板检测

---

## 三、技术架构

### 3.1 前端技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| React | 18.x | UI 框架 |
| TypeScript | 5.x | 类型安全 |
| Vite | 4.x | 构建工具 |
| Ant Design | 5.x | UI 组件 |
| Zustand | 4.x | 状态管理 |
| Framer Motion | 12.x | 动画 |
| Tauri | 2.x | 桌面端 |

### 3.2 服务架构

```
┌─────────────────────────────────────────────┐
│                 UI 层                        │
│   Pages / Components / Hooks                │
└─────────────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────┐
│                核心层                        │
│   Services / Stores / Types                 │
└─────────────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────────┐
│               外部服务                        │
│   LLM API / TTS / Image Gen / Video        │
└─────────────────────────────────────────────┘
```

### 3.3 核心服务

| 服务 | 功能 |
|------|------|
| drama.workflow | 工作流引擎 |
| novel | 小说解析 |
| ai | AI 调度 |
| video | 视频处理 |
| lip-sync | 对口型 |
| consistency | 角色一致性 |
| cost | 成本追踪 |
| storage | 本地存储 |

---

## 四、开发计划

### Phase 1: 基础功能 (MVP)
- [ ] 小说上传解析
- [ ] 剧本生成
- [ ] 基础分镜
- [ ] 简单导出

### Phase 2: 核心增强
- [x] 重试机制
- [x] 检查点
- [x] 智能缓存
- [x] 并行处理

### Phase 3: 高级功能
- [x] 对口型
- [ ] 角色一致性引擎 ⭐ (进行中)
- [ ] 原创性检测

### Phase 4: 多端支持
- [ ] Web 端 (Vite + React)
- [ ] Desktop 端 (Tauri)
- [ ] 移动端 (Taro)
- [ ] 代码共享层

---

## 五、UI/UX 设计方向

### 5.1 整体风格
- 现代简洁
- 暗色主题为主
- 强调内容展示

### 5.2 核心页面
1. **首页** - 项目列表/创建入口
2. **工作流** - 9步可视化流程
3. **编辑器** - 分镜/角色精细调整
4. **设置** - API 配置/偏好设置

### 5.3 交互特点
- 步骤式引导
- 实时预览
- 所见即所得

---

## 六、里程碑

| 版本 | 目标 | 预计时间 |
|------|------|----------|
| 2.0.0 | 基础版发布 | 2026-02 |
| 2.1.0 | 对口型功能 | 2026-03 |
| 2.2.0 | 角色一致性 | 2026-04 |
| 2.3.0 | 社区功能 | 2026-05 |

---

## 七、待讨论问题

1. **目标平台**: Web + Desktop (Tauri)
2. **API 集成**: ✅ 第三方 AI API (OpenAI/Anthropic/百度/阿里/智谱)
3. **发布时间**: MVP 时间要求?
4. ~~商业化模式~~: 暂不开放

---

*本规划将根据项目进展持续更新*
